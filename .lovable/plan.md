

# MedScribe — Plano de Implementação

## Visão Geral
App web para registro de consultas médicas com gravação simulada, transcrição e prontuário estruturado editável. Sem backend — tudo em localStorage com dados seed.

---

## 1. Fundação: Layout, Tema e Navegação
- Configurar **dark mode only** com tipografia Inter
- Sidebar fixa à esquerda com 3 itens: **Consultas**, **Pacientes**, **Meu Perfil** (inferior)
- Ícones Lucide, estados ativos com destaque visual
- Layout responsivo: sidebar colapsável no mobile
- Rotas: `/consultas`, `/consultas/:id`, `/pacientes`, `/perfil`
- Breadcrumbs contextuais nas páginas internas

## 2. Estado Global e Persistência
- Store centralizado com dados em memória (`clinician`, `patient`, `encounter`, `transcript`, `note`, `appSettings`)
- Persistência automática em `localStorage` (chave `medscribe_data_v1`)
- Seed inicial com 2 médicos, ~8 pacientes, ~8 consultas (últimos 14 dias) com status variados
- Transcrições mock com falas alternadas contendo palavras-chave para geração automática

## 3. Página: Consultas (Lista)
- Header com título e botão **"Nova consulta"**
- Filtros: Período, Status (badge colorido), Médico, Paciente
- **Fila de pendências**: 3 cards — prontuários para revisar, consultas sem prontuário, rascunhos recentes
- **Tabela** com colunas: Data/Hora (pt-BR), Paciente, Médico, Duração, Status, Ações
- Empty state com ilustração e CTA "Iniciar primeira consulta"
- Busca instantânea com atalho "/"

## 4. Fluxo: Nova Consulta (Dialog Multi-Step)
- **Step 1 — Identificação**: Select paciente (com "Criar novo" inline), Select médico, Queixa principal, Local
- **Step 2 — Gravação**: Timer visual (00:00), estados Gravando/Pausado, botões Iniciar/Pausar/Finalizar, textarea "Colar transcrição" opcional
- Ao finalizar: gera transcript (colado ou mock), roda parser por palavras-chave para preencher seções do prontuário, salva como "draft", navega para `/consultas/:id`

## 5. Página: Detalhe da Consulta (Prontuário Editável)
- Header com breadcrumb, metadados (data, médico, status), ações: Salvar, Revisado, Finalizar, Exportar (print), menu "…"
- **Layout 2 colunas** (desktop) / empilhado (mobile):
  - **Coluna A — Editor**: 14 seções SOAP em cards/accordions editáveis (QP, HDA, AP, Medicamentos, Alergias, Exame Físico, Hipóteses, Plano, Prescrições, Orientações, CID, Anexos). Indicador "auto-gerado" vs "editado", botão copiar seção
  - **Coluna B — Tabs**: Transcrição (falas rotuladas Médico/Paciente, busca, "inserir trecho na seção"), Checklist (itens básicos), Histórico (log de alterações)
- Atalhos: "s" salvar, "r" revisar, "f" finalizar

## 6. Página: Pacientes (CRUD)
- Header + botão "Novo paciente"
- Filtros: busca nome/CPF, sexo, status Ativo/Arquivado
- Tabela: Nome, Data Nascimento, Contato, Última Consulta, Ações
- Dialog para criar/editar paciente
- Empty state com CTA "Adicionar primeiro paciente"

## 7. Página: Meu Perfil
- Dados mock: nome, email, CRM, fuso pt-BR
- Toggles: persistência local, aviso modo simulado
- Botão "Recarregar dados de exemplo" (restaura seed)
- Botão "Logout" simulado com checkbox "Limpar dados locais"

## 8. Parser de Transcrição (Regras Simples)
- Mapear palavras-chave para seções do prontuário (ex: "dor", "queixa" → QP/HDA; "alergia" → Alergias; "exame" → Solicitações)
- Seções sem match recebem placeholder "(Gerado automaticamente — revise e edite)"
- `autoGenerated` flag em cada seção, muda para `false` ao editar

## 9. Microinterações e Polish
- Animações suaves (fade + translate em cards, scale-in em dialogs)
- Skeletons (300-500ms) para transições simuladas
- Toasts para todas as ações (criação, salvar, revisar, finalizar, excluir)
- Atalhos de teclado globais: `/` busca, `n` nova consulta, `1/2/3` navegação, `Esc` fechar dialogs, `Delete` excluir
- Contraste WCAG AA, foco visível, aria-labels, datas pt-BR

